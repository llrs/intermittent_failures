<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Lluís Revilla Sancho" />

<meta name="date" content="2024-04-09" />

<title>Packages intermittent failtures</title>

<script src="index_files/header-attrs-2.26/header-attrs.js"></script>
<script src="index_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="index_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="index_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="index_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="index_files/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="index_files/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="index_files/tocify-1.9.1/jquery.tocify.js"></script>
<script src="index_files/navigation-1.1/tabsets.js"></script>
<script src="index_files/navigation-1.1/codefolding.js"></script>
<link href="index_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="index_files/highlightjs-9.12.0/highlight.js"></script>
<link href="index_files/tabwid-1.1.3/tabwid.css" rel="stylesheet" />
<script src="index_files/tabwid-1.1.3/tabwid.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Packages intermittent failtures</h1>
<h4 class="author">Lluís Revilla Sancho</h4>
<h4 class="date">2024-04-09</h4>

</div>


<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This report checks if the status of packages on CRAN are due to
intermittent failures.</p>
<p>Failures defined as warnings, notes or errors without change on:</p>
<ul>
<li><p>R version used (if not stable the same svn snapshot)</p></li>
<li><p>The package version (Note that CRAN might modify a package
without changing the version)</p></li>
<li><p>Their dependencies</p></li>
</ul>
<p>Reasons of these failures might be because the packages depend
on:</p>
<ul>
<li><p>Random generation numbers</p></li>
<li><p>Flacky external resources</p></li>
<li><p>Other ?</p></li>
</ul>
<p>Why is this important?</p>
<p>Because package maintainers of dependencies of that package, R core
and CRAN team need to check if the failures are false positives.</p>
<p>This report started because it was <a
href="https://github.com/RConsortium/r-repositories-wg/issues/7">suggested
as something that the R-repositories working group</a> could help the
CRAN team.</p>
</div>
<div id="retrieve-data" class="section level1">
<h1>Retrieve data</h1>
<p>It makes use of <a
href="https://search.r-project.org/R/refmans/tools/html/CRANtools.html">tools::CRAN_check_results</a>
to retrieve the data.</p>
<pre class="r"><code>library(&quot;dplyr&quot;)
library(&quot;tools&quot;, include.only = c(&quot;package_dependencies&quot;, &quot;CRAN_check_results&quot;))
library(&quot;flextable&quot;, include.only = c(&quot;flextable&quot;, &quot;autofit&quot;))
# Use a LOCAL environment to check if files can be overwritten on my computer
local_build &lt;- as.logical(Sys.getenv(&quot;LOCAL&quot;, &quot;FALSE&quot;))
yc &lt;- readRDS(&quot;today.RDS&quot;)
tc &lt;- CRAN_check_results()
# Added 2023/03/09: sometimes some flavors are reported without status: Omit those
tc &lt;- tc[!is.na(tc$Status),]
if (!interactive() &amp;&amp; !local_build) {
  message(&quot;Saving today&#39;s file.&quot;)
  saveRDS(tc, file = &quot;today.RDS&quot;)
} </code></pre>
<p>The checks are from multiple flavors release, devel, old release and
patched on multiple machines and configurations.</p>
<pre class="r"><code>old_flavors &lt;- readRDS(&quot;flavors.RDS&quot;)
flavors &lt;- unique(tc$Flavor)
# One flavor now present in all is the r-devel-windows-x86_64: skip
flavors &lt;- setdiff(flavors, &quot;r-devel-windows-x86_64&quot;)
proto &lt;- data.frame(r_version = character(),
                    os = character(),
                    architecture = character(),
                    other = character())
flavors_df &lt;- strcapture(
  pattern = &quot;r-([[:alnum:]]+)-([[:alnum:]]+)-([[:alnum:]_\\+]+)-?(.*)&quot;, 
  x = flavors,
  proto = proto)

# Extract R version used and svn id
h &lt;- &quot;https://www.r-project.org/nosvn/R.check/%s/ggplot2-00check.html&quot;
links &lt;- sprintf(h, flavors)
extract_revision &lt;- function(x) {
  r &lt;- readLines(x, 12)[12]
  version &lt;- strcapture(pattern = &quot;([[:digit:]]\\.[[:digit:]]\\.[[:digit:]])&quot;,  
                        x = r, proto = data.frame(version = character()))
  revision &lt;- strcapture(pattern = &quot;(r[[:digit:]]+)&quot;,  x = r,
                         proto = data.frame(revision = character()))
  cbind(version, revision)
}
revision &lt;- data.frame(version = character(),
                       revision = character())
for (i in links) {
  revision &lt;- rbind(revision, extract_revision(i))
}

flavors_df &lt;- cbind(flavors = flavors, flavors_df, revision)
if (!interactive() &amp;&amp; !local_build) {
  saveRDS(flavors_df, &quot;flavors.RDS&quot;)
}

m &lt;- match(tc$Flavor, flavors_df$flavors)
tc_flavors &lt;- cbind(tc, flavors_df[m, ])
flextable(flavors_df) |&gt; 
  autofit()</code></pre>
<div class="tabwid"><style>.cl-9b43538c{}.cl-9b3ba376{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-9b3e27ea{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9b3e3ba4{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3ba5{width:0.984in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bae{width:0.944in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3baf{width:1.216in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bb8{width:1.275in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bb9{width:0.845in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bc2{width:0.887in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bc3{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bc4{width:0.984in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bc5{width:0.944in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bcc{width:1.216in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bcd{width:1.275in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bce{width:0.845in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bd6{width:0.887in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bd7{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bd8{width:0.984in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bd9{width:0.944in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3be0{width:1.216in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3be1{width:1.275in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3be2{width:0.845in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bea{width:0.887in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3beb{width:2.901in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bec{width:0.984in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bf4{width:0.944in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bf5{width:1.216in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bf6{width:1.275in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bfe{width:0.845in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9b3e3bff{width:0.887in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-9b43538c'><thead><tr style="overflow-wrap:break-word;"><th class="cl-9b3e3ba4"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">flavors</span></p></th><th class="cl-9b3e3ba5"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r_version</span></p></th><th class="cl-9b3e3bae"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">os</span></p></th><th class="cl-9b3e3baf"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">architecture</span></p></th><th class="cl-9b3e3bb8"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">other</span></p></th><th class="cl-9b3e3bb9"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">version</span></p></th><th class="cl-9b3e3bc2"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">revision</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-9b3e3bc3"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r-devel-linux-x86_64-debian-clang</span></p></td><td class="cl-9b3e3bc4"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">devel</span></p></td><td class="cl-9b3e3bc5"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">linux</span></p></td><td class="cl-9b3e3bcc"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">x86_64</span></p></td><td class="cl-9b3e3bcd"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">debian-clang</span></p></td><td class="cl-9b3e3bce"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td><td class="cl-9b3e3bd6"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r86351</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9b3e3bc3"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r-devel-linux-x86_64-debian-gcc</span></p></td><td class="cl-9b3e3bc4"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">devel</span></p></td><td class="cl-9b3e3bc5"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">linux</span></p></td><td class="cl-9b3e3bcc"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">x86_64</span></p></td><td class="cl-9b3e3bcd"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">debian-gcc</span></p></td><td class="cl-9b3e3bce"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td><td class="cl-9b3e3bd6"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r86351</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9b3e3bc3"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r-devel-linux-x86_64-fedora-clang</span></p></td><td class="cl-9b3e3bc4"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">devel</span></p></td><td class="cl-9b3e3bc5"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">linux</span></p></td><td class="cl-9b3e3bcc"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">x86_64</span></p></td><td class="cl-9b3e3bcd"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">fedora-clang</span></p></td><td class="cl-9b3e3bce"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td><td class="cl-9b3e3bd6"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r86265</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9b3e3bc3"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r-devel-linux-x86_64-fedora-gcc</span></p></td><td class="cl-9b3e3bc4"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">devel</span></p></td><td class="cl-9b3e3bc5"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">linux</span></p></td><td class="cl-9b3e3bcc"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">x86_64</span></p></td><td class="cl-9b3e3bcd"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">fedora-gcc</span></p></td><td class="cl-9b3e3bce"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td><td class="cl-9b3e3bd6"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r86344</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9b3e3bc3"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r-patched-linux-x86_64</span></p></td><td class="cl-9b3e3bc4"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">patched</span></p></td><td class="cl-9b3e3bc5"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">linux</span></p></td><td class="cl-9b3e3bcc"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">x86_64</span></p></td><td class="cl-9b3e3bcd"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td><td class="cl-9b3e3bce"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">4.4.0</span></p></td><td class="cl-9b3e3bd6"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r86304</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9b3e3bc3"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r-release-linux-x86_64</span></p></td><td class="cl-9b3e3bc4"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">release</span></p></td><td class="cl-9b3e3bc5"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">linux</span></p></td><td class="cl-9b3e3bcc"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">x86_64</span></p></td><td class="cl-9b3e3bcd"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td><td class="cl-9b3e3bce"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">4.3.3</span></p></td><td class="cl-9b3e3bd6"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9b3e3bd7"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r-release-macos-arm64</span></p></td><td class="cl-9b3e3bd8"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">release</span></p></td><td class="cl-9b3e3bd9"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">macos</span></p></td><td class="cl-9b3e3be0"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">arm64</span></p></td><td class="cl-9b3e3be1"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td><td class="cl-9b3e3be2"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">4.3.1</span></p></td><td class="cl-9b3e3bea"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9b3e3bc3"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r-release-macos-x86_64</span></p></td><td class="cl-9b3e3bc4"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">release</span></p></td><td class="cl-9b3e3bc5"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">macos</span></p></td><td class="cl-9b3e3bcc"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">x86_64</span></p></td><td class="cl-9b3e3bcd"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td><td class="cl-9b3e3bce"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">4.3.2</span></p></td><td class="cl-9b3e3bd6"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9b3e3bc3"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r-release-windows-x86_64</span></p></td><td class="cl-9b3e3bc4"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">release</span></p></td><td class="cl-9b3e3bc5"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">windows</span></p></td><td class="cl-9b3e3bcc"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">x86_64</span></p></td><td class="cl-9b3e3bcd"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td><td class="cl-9b3e3bce"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">4.3.3</span></p></td><td class="cl-9b3e3bd6"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9b3e3bd7"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r-oldrel-macos-arm64</span></p></td><td class="cl-9b3e3bd8"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">oldrel</span></p></td><td class="cl-9b3e3bd9"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">macos</span></p></td><td class="cl-9b3e3be0"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">arm64</span></p></td><td class="cl-9b3e3be1"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td><td class="cl-9b3e3be2"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">4.2.3</span></p></td><td class="cl-9b3e3bea"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9b3e3beb"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">r-oldrel-windows-x86_64</span></p></td><td class="cl-9b3e3bec"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">oldrel</span></p></td><td class="cl-9b3e3bf4"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">windows</span></p></td><td class="cl-9b3e3bf5"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">x86_64</span></p></td><td class="cl-9b3e3bf6"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td><td class="cl-9b3e3bfe"><p class="cl-9b3e27ea"><span class="cl-9b3ba376">4.2.3</span></p></td><td class="cl-9b3e3bff"><p class="cl-9b3e27ea"><span class="cl-9b3ba376"></span></p></td></tr></tbody></table></div>
<p>It assumes that the same configuration in one package is used for
all. Or in other words that the reports of the configuration (svn
revision and version) for the A3 package is the same as for all the
other packages.</p>
<p>Warning: This assumption is not always true, but this would require
to check each log file on each flavor to verify the R and svn id of each
package (which could take too much time and resources).</p>
</div>
<div id="overview" class="section level1">
<h1>Overview</h1>
<p>Briefly an introduction of how much effort goes into checking</p>
<pre class="r"><code>library(&quot;ggplot2&quot;)
theme_set(theme_minimal())
tc |&gt; 
  filter(!is.na(T_install)) |&gt; 
  ggplot() +
  geom_violin(aes(T_install, Flavor)) +
  scale_x_log10() +
  labs(x = &quot;seconds&quot;, title = &quot;Time to install&quot;, y = element_blank())</code></pre>
<div class="figure" style="text-align: center">
<img src="index_files/figure-html/plots-install-1.png" alt="Machines (y axis) vs install time (seconds, x axis), violing plot usually around 10 seconds." width="672" />
<p class="caption">
Distribution of install time on each machine.
</p>
</div>
<p>This means that just to install all the packages on the multiple
flavors with a single CPU would take 40 days.</p>
<pre class="r"><code>tc |&gt; 
  filter(!is.na(T_check)) |&gt; 
  ggplot() +
  geom_violin(aes(T_check, Flavor), trim = FALSE) +
  scale_x_log10() +
  labs(x = &quot;seconds&quot;, title = &quot;Time to check&quot;, y = element_blank())</code></pre>
<div class="figure" style="text-align: center">
<img src="index_files/figure-html/plots-check-1.png" alt="Machines (y axis) vs check time (seconds, x axis), violing plot usually around 100 seconds." width="672" />
<p class="caption">
Distribution of checking time on each machine.
</p>
</div>
<p>This means that to check all the packages on the multiple flavors
with a single CPU would take 180 days.</p>
<pre class="r"><code>tc |&gt; 
  filter(!is.na(T_total)) |&gt; 
  ggplot() +
  geom_violin(aes(T_total, Flavor)) +
  scale_x_log10() +
  labs(x = &quot;seconds&quot;, title = &quot;Time to check and install&quot;, y = element_blank())</code></pre>
<div class="figure" style="text-align: center">
<img src="index_files/figure-html/plots-total-1.png" alt="Machines (y axis) vs total time (seconds, x axis), violing plot usually around 100 seconds." width="672" />
<p class="caption">
Distribution of total time on each machine.
</p>
</div>
<p>This means that to install and check all the packages with a single
CPU would take 349 days.</p>
<p>I don’t know the computational cost of 266 days of CPU (every day),
but a rough calculation of 2.5 cents per hour means 209.58 dollars daily
dedicated to this.</p>
<pre class="r"><code>tc |&gt; 
  group_by(Package) |&gt; 
  summarize(Versions = n_distinct(Version)) |&gt; 
  ungroup() |&gt; 
  count(Versions, name = &quot;Packages&quot;, sort = TRUE) |&gt; 
  flextable() |&gt; 
  autofit()</code></pre>
<div class="tabwid"><style>.cl-9c68394e{}.cl-9c632698{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-9c654dba{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9c655db4{width:0.938in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9c655db5{width:1.008in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9c655dbe{width:0.938in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9c655dbf{width:1.008in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9c655dc0{width:0.938in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9c655dc1{width:1.008in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9c655dc8{width:0.938in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9c655dc9{width:1.008in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-9c68394e'><thead><tr style="overflow-wrap:break-word;"><th class="cl-9c655db4"><p class="cl-9c654dba"><span class="cl-9c632698">Versions</span></p></th><th class="cl-9c655db5"><p class="cl-9c654dba"><span class="cl-9c632698">Packages</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-9c655dbe"><p class="cl-9c654dba"><span class="cl-9c632698">1</span></p></td><td class="cl-9c655dbf"><p class="cl-9c654dba"><span class="cl-9c632698">20,410</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9c655dc0"><p class="cl-9c654dba"><span class="cl-9c632698">2</span></p></td><td class="cl-9c655dc1"><p class="cl-9c654dba"><span class="cl-9c632698">268</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9c655dc8"><p class="cl-9c654dba"><span class="cl-9c632698">3</span></p></td><td class="cl-9c655dc9"><p class="cl-9c654dba"><span class="cl-9c632698">6</span></p></td></tr></tbody></table></div>
<p>This was surprising, but sometimes checks have multiple versions.
Probably when a new version is added and the system don’t catch it for a
certain machine.</p>
<pre class="r"><code>tc |&gt; 
  group_by(Package) |&gt; 
  summarize(Flavors = n_distinct(Flavor)) |&gt; 
  ungroup() |&gt; 
  count(Flavors, name = &quot;Packages&quot;, sort = TRUE) |&gt; 
  flextable() |&gt; 
  autofit()</code></pre>
<div class="tabwid"><style>.cl-9ca92b8e{}.cl-9ca413ce{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-9ca62c90{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-9ca63cda{width:0.835in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9ca63cdb{width:1.008in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9ca63ce4{width:0.835in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9ca63ce5{width:1.008in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9ca63ce6{width:0.835in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9ca63ce7{width:1.008in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9ca63cee{width:0.835in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9ca63cef{width:1.008in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9ca63cf0{width:0.835in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9ca63cf8{width:1.008in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9ca63cf9{width:0.835in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-9ca63cfa{width:1.008in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-9ca92b8e'><thead><tr style="overflow-wrap:break-word;"><th class="cl-9ca63cda"><p class="cl-9ca62c90"><span class="cl-9ca413ce">Flavors</span></p></th><th class="cl-9ca63cdb"><p class="cl-9ca62c90"><span class="cl-9ca413ce">Packages</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-9ca63ce4"><p class="cl-9ca62c90"><span class="cl-9ca413ce">12</span></p></td><td class="cl-9ca63ce5"><p class="cl-9ca62c90"><span class="cl-9ca413ce">20,520</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9ca63ce6"><p class="cl-9ca62c90"><span class="cl-9ca413ce">10</span></p></td><td class="cl-9ca63ce7"><p class="cl-9ca62c90"><span class="cl-9ca413ce">53</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9ca63cee"><p class="cl-9ca62c90"><span class="cl-9ca413ce">11</span></p></td><td class="cl-9ca63cef"><p class="cl-9ca62c90"><span class="cl-9ca413ce">51</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9ca63ce6"><p class="cl-9ca62c90"><span class="cl-9ca413ce">9</span></p></td><td class="cl-9ca63ce7"><p class="cl-9ca62c90"><span class="cl-9ca413ce">29</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9ca63cee"><p class="cl-9ca62c90"><span class="cl-9ca413ce">5</span></p></td><td class="cl-9ca63cef"><p class="cl-9ca62c90"><span class="cl-9ca413ce">12</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9ca63ce6"><p class="cl-9ca62c90"><span class="cl-9ca413ce">4</span></p></td><td class="cl-9ca63ce7"><p class="cl-9ca62c90"><span class="cl-9ca413ce">9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9ca63ce6"><p class="cl-9ca62c90"><span class="cl-9ca413ce">3</span></p></td><td class="cl-9ca63ce7"><p class="cl-9ca62c90"><span class="cl-9ca413ce">8</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9ca63cf0"><p class="cl-9ca62c90"><span class="cl-9ca413ce">7</span></p></td><td class="cl-9ca63cf8"><p class="cl-9ca62c90"><span class="cl-9ca413ce">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-9ca63cf9"><p class="cl-9ca62c90"><span class="cl-9ca413ce">8</span></p></td><td class="cl-9ca63cfa"><p class="cl-9ca62c90"><span class="cl-9ca413ce">1</span></p></td></tr></tbody></table></div>
<p>Similarly, often packages are only tested on few configurations.</p>
<p>Combining both we can have packages with few configurations that have
multiple versions being tested.</p>
<pre class="r"><code>tc |&gt; 
  group_by(Package) |&gt; 
  summarize(Versions = as.character(n_distinct(Version)),
            Flavors = n_distinct(Flavor)) |&gt; 
  ungroup() |&gt; 
  count(Flavors, Versions, name = &quot;Packages&quot;) |&gt; 
  ggplot() +
  geom_tile(aes(Flavors, Versions, fill = log10(Packages))) +
  scale_x_continuous(expand = expansion())</code></pre>
<div class="figure" style="text-align: center">
<img src="index_files/figure-html/plot-versions-flavors-1.png" alt="Flavors of machines and versions of packages" width="672" />
<p class="caption">
Most packages are just tested one version.
</p>
</div>
<p>But focusing on those that have just one version of the package being
tested, most of the machines have packages either OK or with some
notes.</p>
<pre class="r"><code>man_colors &lt;- c(&quot;OK&quot; = &quot;green&quot;, &quot;NOTE&quot; = &quot;darkgreen&quot;, 
                &quot;WARNING&quot; = &quot;yellow&quot;, &quot;ERROR&quot; = &quot;red&quot;, &quot;FAILURE&quot; = &quot;black&quot;)
tc |&gt; 
  group_by(Package) |&gt; 
  filter(n_distinct(Version) == 1) |&gt; 
  ungroup() |&gt; 
  group_by(Flavor) |&gt; 
  count(Status, name = &quot;packages&quot;) |&gt; 
  mutate(perc = packages/sum(packages),
         Status = forcats::fct_relevel(Status, names(man_colors))) |&gt; 
  ggplot() + 
  geom_col(aes(perc, Flavor, fill = Status)) +
  scale_x_continuous(expand = expansion(), labels = scales::percent_format()) +
  scale_fill_manual(values = man_colors) +
  labs(title = &quot;Packages check status&quot;, x = element_blank())</code></pre>
<div class="figure" style="text-align: center">
<img src="index_files/figure-html/plot-flavors-status-1.png" alt="On the vertical axis the machine, on the horitzonal axis the packages colored by the status." width="672" />
<p class="caption">
Most frequent status is OK or NOTE on all machines.
</p>
</div>
<p>If we look at the most frequent status report for packages we can see
this table:</p>
<pre class="r"><code>ts &lt;- tc |&gt; 
  group_by(Package) |&gt; 
  filter(n_distinct(Version) == 1) |&gt; 
  count(Status, name = &quot;flavors&quot;) |&gt; 
  ungroup() |&gt; 
  tidyr::pivot_wider(values_from = flavors, names_from = Status, 
                     values_fill = 0) |&gt; 
  count(OK, NOTE, WARNING, ERROR, FAILURE, name = &quot;packages&quot;, sort = TRUE)
download.file(&quot;https://cran.r-project.org/web/packages/packages.rds&quot;, 
              destfile = &quot;packages.RDS&quot;) # From the help page
ap &lt;- readRDS(&quot;packages.RDS&quot;) |&gt; 
  as.data.frame() |&gt; 
  distinct(Package, .keep_all = TRUE)
ap_bioc &lt;- available.packages(repos = BiocManager::repositories()[1:5])
ap_bioc &lt;- cbind(ap_bioc, Additional_repositories = NA)
ap_colm &lt;- intersect(colnames(ap), colnames(ap_bioc))
ap &lt;- rbind(ap[, ap_colm], ap_bioc[, ap_colm])
head(ts) |&gt; 
  flextable() |&gt; 
  autofit()</code></pre>
<div class="tabwid"><style>.cl-b06f86b8{}.cl-b06a39d8{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-b06c6744{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b06c787e{width:0.506in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c787f{width:0.71in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c7888{width:1.039in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c7892{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c7893{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c7894{width:1.012in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c789c{width:0.506in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c789d{width:0.71in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c789e{width:1.039in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c789f{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78a6{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78a7{width:1.012in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78b0{width:0.506in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78b1{width:0.71in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78b2{width:1.039in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78ba{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78bb{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78bc{width:1.012in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78bd{width:0.506in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78c4{width:0.71in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78c5{width:1.039in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78ce{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78cf{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b06c78d0{width:1.012in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-b06f86b8'><thead><tr style="overflow-wrap:break-word;"><th class="cl-b06c787e"><p class="cl-b06c6744"><span class="cl-b06a39d8">OK</span></p></th><th class="cl-b06c787f"><p class="cl-b06c6744"><span class="cl-b06a39d8">NOTE</span></p></th><th class="cl-b06c7888"><p class="cl-b06c6744"><span class="cl-b06a39d8">WARNING</span></p></th><th class="cl-b06c7892"><p class="cl-b06c6744"><span class="cl-b06a39d8">ERROR</span></p></th><th class="cl-b06c7893"><p class="cl-b06c6744"><span class="cl-b06a39d8">FAILURE</span></p></th><th class="cl-b06c7894"><p class="cl-b06c6744"><span class="cl-b06a39d8">packages</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-b06c789c"><p class="cl-b06c6744"><span class="cl-b06a39d8">12</span></p></td><td class="cl-b06c789d"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c789e"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c789f"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78a6"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78a7"><p class="cl-b06c6744"><span class="cl-b06a39d8">11,912</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b06c789c"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c789d"><p class="cl-b06c6744"><span class="cl-b06a39d8">12</span></p></td><td class="cl-b06c789e"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c789f"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78a6"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78a7"><p class="cl-b06c6744"><span class="cl-b06a39d8">2,369</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b06c789c"><p class="cl-b06c6744"><span class="cl-b06a39d8">6</span></p></td><td class="cl-b06c789d"><p class="cl-b06c6744"><span class="cl-b06a39d8">6</span></p></td><td class="cl-b06c789e"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c789f"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78a6"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78a7"><p class="cl-b06c6744"><span class="cl-b06a39d8">1,632</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b06c78b0"><p class="cl-b06c6744"><span class="cl-b06a39d8">9</span></p></td><td class="cl-b06c78b1"><p class="cl-b06c6744"><span class="cl-b06a39d8">3</span></p></td><td class="cl-b06c78b2"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78ba"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78bb"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78bc"><p class="cl-b06c6744"><span class="cl-b06a39d8">957</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b06c78b0"><p class="cl-b06c6744"><span class="cl-b06a39d8">10</span></p></td><td class="cl-b06c78b1"><p class="cl-b06c6744"><span class="cl-b06a39d8">2</span></p></td><td class="cl-b06c78b2"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78ba"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78bb"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78bc"><p class="cl-b06c6744"><span class="cl-b06a39d8">765</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b06c78bd"><p class="cl-b06c6744"><span class="cl-b06a39d8">2</span></p></td><td class="cl-b06c78c4"><p class="cl-b06c6744"><span class="cl-b06a39d8">10</span></p></td><td class="cl-b06c78c5"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78ce"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78cf"><p class="cl-b06c6744"><span class="cl-b06a39d8">0</span></p></td><td class="cl-b06c78d0"><p class="cl-b06c6744"><span class="cl-b06a39d8">548</span></p></td></tr></tbody></table></div>
<p>We can see that the most common occurrences are some sort of OK and
notes on checks. We can also check the <a
href="https://cran.r-project.org/web/checks/check_summary.html">official
results on CRAN</a>.</p>
<p>We can see that 2.19%, 0.59%, 0.10%, 0.09%, 0.01% of packages pass
all checks without notes.</p>
<p>Now let’s see which of the notes or failures are due to intermittent
issues.</p>
</div>
<div id="compare" class="section level1">
<h1>Compare</h1>
<p>First we need to make sure that we compare the right configurations.
They must be the same machine, the same R version and the same svn
revision between yesterday and today.</p>
<pre class="r"><code># Compare the previous flavor with today&#39;s
m_flavor &lt;- which(flavors_df$flavors %in% old_flavors$flavors)
m_version &lt;- which(flavors_df$version %in% old_flavors$version)
m_revision &lt;- which(flavors_df$revision %in% old_flavors$revision)
tm &lt;- table(c(m_flavor, m_version, m_revision))
compare &lt;- flavors_df$flavors[tm == 3] # Only missing the packages version</code></pre>
<div id="all-changes" class="section level2">
<h2>All changes</h2>
<p>Next, compare the status of the packages if the version of the
package is the same.</p>
<pre class="r"><code># Find package on the flavors to compare that haven&#39;t changed versions
library(&quot;dplyr&quot;)
tcc &lt;- filter(tc, Flavor %in% compare) |&gt; 
  select(Flavor, Package, Version, Status) |&gt; 
  arrange(Flavor, Package)
ycc &lt;- filter(yc, Flavor %in% compare) |&gt; 
  select(Flavor, Package, Version, Status) |&gt; 
  arrange(Flavor, Package)

all_checks &lt;- merge(tcc, ycc, by = c(&quot;Flavor&quot;, &quot;Package&quot;), 
                    suffixes = c(&quot;.t&quot;, &quot;.y&quot;), all = TRUE) 

possible_packages &lt;- all_checks |&gt; 
  filter(Version.t == Version.y &amp; # Same version
           Status.t != Status.y &amp; # Different status
           !is.na(Status.y) &amp; # No new version or removed package
           !is.na(Status.t)) |&gt; 
  rename(Today = Status.t, Yesterday = Status.y)
possible_packages |&gt; 
  select(Package, Flavor, Today, Yesterday, -Version.t, -Version.y) |&gt; 
  arrange(Package, Flavor) |&gt; 
  flextable() |&gt; 
  autofit()</code></pre>
<div class="tabwid"><style>.cl-b11c1568{}.cl-b116e7be{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-b1190a94{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b1191b1a{width:1.538in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b1b{width:2.875in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b24{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b25{width:1.05in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b2e{width:1.538in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b2f{width:2.875in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b38{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b39{width:1.05in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b3a{width:1.538in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b42{width:2.875in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b43{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b44{width:1.05in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b4c{width:1.538in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b4d{width:2.875in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b4e{width:0.922in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1191b56{width:1.05in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-b11c1568'><thead><tr style="overflow-wrap:break-word;"><th class="cl-b1191b1a"><p class="cl-b1190a94"><span class="cl-b116e7be">Package</span></p></th><th class="cl-b1191b1b"><p class="cl-b1190a94"><span class="cl-b116e7be">Flavor</span></p></th><th class="cl-b1191b24"><p class="cl-b1190a94"><span class="cl-b116e7be">Today</span></p></th><th class="cl-b1191b25"><p class="cl-b1190a94"><span class="cl-b116e7be">Yesterday</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-b1191b2e"><p class="cl-b1190a94"><span class="cl-b116e7be">clugenr</span></p></td><td class="cl-b1191b2f"><p class="cl-b1190a94"><span class="cl-b116e7be">r-devel-linux-x86_64-fedora-clang</span></p></td><td class="cl-b1191b38"><p class="cl-b1190a94"><span class="cl-b116e7be">ERROR</span></p></td><td class="cl-b1191b39"><p class="cl-b1190a94"><span class="cl-b116e7be">OK</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b1191b2e"><p class="cl-b1190a94"><span class="cl-b116e7be">diseasemapping</span></p></td><td class="cl-b1191b2f"><p class="cl-b1190a94"><span class="cl-b116e7be">r-devel-linux-x86_64-fedora-clang</span></p></td><td class="cl-b1191b38"><p class="cl-b1190a94"><span class="cl-b116e7be">NOTE</span></p></td><td class="cl-b1191b39"><p class="cl-b1190a94"><span class="cl-b116e7be">OK</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b1191b2e"><p class="cl-b1190a94"><span class="cl-b116e7be">diseasemapping</span></p></td><td class="cl-b1191b2f"><p class="cl-b1190a94"><span class="cl-b116e7be">r-devel-linux-x86_64-fedora-gcc</span></p></td><td class="cl-b1191b38"><p class="cl-b1190a94"><span class="cl-b116e7be">NOTE</span></p></td><td class="cl-b1191b39"><p class="cl-b1190a94"><span class="cl-b116e7be">OK</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b1191b3a"><p class="cl-b1190a94"><span class="cl-b116e7be">doMPI</span></p></td><td class="cl-b1191b42"><p class="cl-b1190a94"><span class="cl-b116e7be">r-release-macos-arm64</span></p></td><td class="cl-b1191b43"><p class="cl-b1190a94"><span class="cl-b116e7be">FAILURE</span></p></td><td class="cl-b1191b44"><p class="cl-b1190a94"><span class="cl-b116e7be">ERROR</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b1191b4c"><p class="cl-b1190a94"><span class="cl-b116e7be">nhdR</span></p></td><td class="cl-b1191b4d"><p class="cl-b1190a94"><span class="cl-b116e7be">r-devel-linux-x86_64-fedora-clang</span></p></td><td class="cl-b1191b4e"><p class="cl-b1190a94"><span class="cl-b116e7be">ERROR</span></p></td><td class="cl-b1191b56"><p class="cl-b1190a94"><span class="cl-b116e7be">OK</span></p></td></tr></tbody></table></div>
<p>If the machine and R versions is the same but the check of the
package is different there might be some discrepancy between the
dependencies.</p>
<pre class="r"><code># Extract dependencies
dependencies &lt;- package_dependencies(unique(possible_packages$Package),
                                     # Should it check all the recursive dependencies or only direct?
                                     db = ap, # Only considering those dependencies on CRAN and Bioconductor but not any Additional_repositories. 
                                     recursive = TRUE, 
                                     which = c(&quot;Depends&quot;, &quot;Imports&quot;, &quot;LinkingTo&quot;, &quot;Suggests&quot;))

# Prepare to compare versions (as they are sorted by everything else we can compare directly)
intermittent_failures &lt;- rep(FALSE, length(dependencies))
names(intermittent_failures) &lt;- names(dependencies)
dep_0 &lt;- lengths(dependencies) == 0
intermittent_failures[dep_0] &lt;- TRUE</code></pre>
<p>If they do not have any recursive dependency on Depends, Imports,
LinkingTo and Suggests they might be have some intermittent problems on
the packages. These is only on dependencies on CRAN and Bioconductor but
not in other additional repositories (There are 143 packages with
additional repositories).</p>
<p>If they have some dependencies and those dependencies didn’t change
as far as we can tell then there might be some problems with random
numbers or connectivity.</p>
<pre class="r"><code>for (pkg in names(intermittent_failures[!intermittent_failures])) {
  dep &lt;- dependencies[[pkg]]
  fl &lt;- possible_packages$Flavor[possible_packages$Package == pkg]
  intermittent_failures[pkg] &lt;- all_checks |&gt; 
    filter(Package %in% dep,
           Flavor %in% fl,
           Version.t == Version.y,
           Status.t != Status.y) |&gt; 
    nrow() == 0 # If packages outside || any(!dep %in% rownames(ap)) 
}
packages &lt;- names(intermittent_failures)[intermittent_failures]</code></pre>
<p>We finally show the differences on the status of those without any
dependency change on version or status<a href="#fn1"
class="footnote-ref" id="fnref1"><sup>1</sup></a>:</p>
<pre class="r"><code>keep_files &lt;- filter(possible_packages, Package %in% packages) |&gt; 
  merge(y = flavors_df, by.x = &quot;Flavor&quot;, by.y = &quot;flavors&quot;, all.x = TRUE, all.y = FALSE) |&gt; 
  select(Package, Flavor, Version = Version.t, R_version = r_version, OS = os, 
         architecture, other, version, revision) |&gt; 
  mutate(Date = Sys.time())

if (nrow(keep_files &gt;= 1)) {
  write.csv(keep_files, 
            paste0(&quot;cran-failing-&quot;, format(Sys.time(), &quot;%Y%m%dT%H%M&quot;), &quot;.csv&quot;),
            row.names = FALSE,
            quote = FALSE,
  )
}</code></pre>
<pre class="r"><code>filter(possible_packages, Package %in% packages) |&gt; 
  select(Package, Flavor, Today, Yesterday, -Version.t, -Version.y) |&gt; 
  flextable() |&gt; 
  autofit()</code></pre>
<div class="tabwid"><style>.cl-b19b62dc{}.cl-b194645a{font-family:'DejaVu Sans';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-b19867f8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b1987946{width:1.538in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1987950{width:2.875in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1987951{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1987952{width:1.05in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1987953{width:1.538in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b198795a{width:2.875in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b198795b{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b198795c{width:1.05in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b198795d{width:1.538in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b198795e{width:2.875in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1987964{width:0.82in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b1987965{width:1.05in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing='true' class='cl-b19b62dc'><thead><tr style="overflow-wrap:break-word;"><th class="cl-b1987946"><p class="cl-b19867f8"><span class="cl-b194645a">Package</span></p></th><th class="cl-b1987950"><p class="cl-b19867f8"><span class="cl-b194645a">Flavor</span></p></th><th class="cl-b1987951"><p class="cl-b19867f8"><span class="cl-b194645a">Today</span></p></th><th class="cl-b1987952"><p class="cl-b19867f8"><span class="cl-b194645a">Yesterday</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-b1987953"><p class="cl-b19867f8"><span class="cl-b194645a">clugenr</span></p></td><td class="cl-b198795a"><p class="cl-b19867f8"><span class="cl-b194645a">r-devel-linux-x86_64-fedora-clang</span></p></td><td class="cl-b198795b"><p class="cl-b19867f8"><span class="cl-b194645a">ERROR</span></p></td><td class="cl-b198795c"><p class="cl-b19867f8"><span class="cl-b194645a">OK</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b1987953"><p class="cl-b19867f8"><span class="cl-b194645a">diseasemapping</span></p></td><td class="cl-b198795a"><p class="cl-b19867f8"><span class="cl-b194645a">r-devel-linux-x86_64-fedora-clang</span></p></td><td class="cl-b198795b"><p class="cl-b19867f8"><span class="cl-b194645a">NOTE</span></p></td><td class="cl-b198795c"><p class="cl-b19867f8"><span class="cl-b194645a">OK</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b1987953"><p class="cl-b19867f8"><span class="cl-b194645a">nhdR</span></p></td><td class="cl-b198795a"><p class="cl-b19867f8"><span class="cl-b194645a">r-devel-linux-x86_64-fedora-clang</span></p></td><td class="cl-b198795b"><p class="cl-b19867f8"><span class="cl-b194645a">ERROR</span></p></td><td class="cl-b198795c"><p class="cl-b19867f8"><span class="cl-b194645a">OK</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b198795d"><p class="cl-b19867f8"><span class="cl-b194645a">diseasemapping</span></p></td><td class="cl-b198795e"><p class="cl-b19867f8"><span class="cl-b194645a">r-devel-linux-x86_64-fedora-gcc</span></p></td><td class="cl-b1987964"><p class="cl-b19867f8"><span class="cl-b194645a">NOTE</span></p></td><td class="cl-b1987965"><p class="cl-b19867f8"><span class="cl-b194645a">OK</span></p></td></tr></tbody></table></div>
</div>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
<pre class="r"><code>cat(&quot;There are no packages detected with differences between yesterday and today attributable to intermittent failures.\n&quot;)
knitr::knit_exit()</code></pre>
<pre class="r"><code>cat(&quot;This suggests that these packages might have some problems with random numbers or connectivity:\n\n&quot;) </code></pre>
<p>This suggests that these packages might have some problems with
random numbers or connectivity:</p>
<pre class="r"><code>if (any(dep_0)) {
  cat(&quot;\n## Packages with dependencies\n\n&quot;)
  cat(paste0(&quot; - &quot;, sort(intersect(packages, 
                                   names(dependencies)[dep_0])), &quot;\n&quot;), sep = &quot;&quot;)
  cat(&quot;\n## Packages without dependencies\n\n&quot;)
  cat(paste0(&quot; - &quot;, sort(intersect(packages,
                                   names(dependencies)[!dep_0])), &quot;\n&quot;), sep = &quot;&quot;)
  
} else {
  cat(paste0(&quot; - &quot;, sort(packages), &quot;\n&quot;), sep = &quot;&quot;)
}</code></pre>
<ul>
<li>clugenr</li>
<li>diseasemapping</li>
<li>nhdR</li>
</ul>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>I think a new version might not propagate to check other
packages until 24 hours later as checks might have already started for
that day.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
